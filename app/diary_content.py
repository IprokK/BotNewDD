"""–ö–æ–Ω—Ç–µ–Ω—Ç –¥–Ω–µ–≤–Ω–∏–∫–∞ –¥–ª—è —Ä–æ–ª–µ–π A (–ú–∞—Ä–∫) –∏ B (–ê–Ω–Ω–∞)."""

import re
import html

# –†–æ–ª—å A ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –ú–∞—Ä–∫–∞
DIARY_MARK = """–ó–∞–ø–∏—Å—å 1
10 —è–Ω–≤–∞—Ä—è
–°–µ–≥–æ–¥–Ω—è –±—ã–ª –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —Å—ä—ë–º–æ–∫.
–°–≤–µ—Ç –≤—ã—Å—Ç–∞–≤–ª—è–ª–∏ —á–∞—Å, –ò–ª—å—è –æ—Ä–∞–ª –∫–∞–∫ –±—É–¥—Ç–æ –º—ã —Å–Ω–∏–º–∞–µ–º –º–∞—Ä–≤–µ–ª üò≠

–ê–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤–∞—è. –û–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –≥–æ—Ä–∏—Ç —ç—Ç–∏–º.
–ö–æ–≥–¥–∞ –æ–Ω–∞ —É–ª—ã–±–∞–µ—Ç—Å—è –≤ –∫–∞–¥—Ä–µ, —É –º–µ–Ω—è –±—É–¥—Ç–æ –≤–Ω—É—Ç—Ä–∏ —á—Ç–æ-—Ç–æ —â—ë–ª–∫–∞–µ—Ç.

–û–Ω–∞ –æ–ø—è—Ç—å –ø—Ä–∏—Ç–∞—â–∏–ª–∞ –≥–∏—Ç–∞—Ä—É.
–Ø —Å–∫–∞–∑–∞–ª —á—Ç–æ –Ω–µ–Ω–∞–≤–∏–∂—É –µ—ë. (—à—É—Ç–∫–∞)
–ù–æ –æ–Ω–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞—Å—Ç–∞–≤–∏–ª–∞ –º–µ–Ω—è –∏–≥—Ä–∞—Ç—å.
–ò —è –∏–≥—Ä–∞–ª.

–ù–µ —Ö–æ—á—É –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å, –Ω–æ –º–Ω–µ —ç—Ç–æ –Ω—Ä–∞–≤–∏—Ç—Å—è.

–ó–∞–ø–∏—Å—å 2
16 —è–Ω–≤–∞—Ä—è
–°–Ω—è–ª–∏ —Å—Ü–µ–Ω—É –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ.
–ê–Ω—è —Ç–∞–∫–∞—è –∫—Ä–∞—Å–∏–≤–∞—è, —á—Ç–æ —è –¥–∞–∂–µ —Ç–µ–∫—Å—Ç –∑–∞–±—ã–ª –Ω–∞ —Å–µ–∫—É–Ω–¥—É.

–õ–µ–Ω–∞ —Å–∫–∞–∑–∞–ª–∞ —á—Ç–æ –º—ã "–∏–¥–µ–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞ –¥–ª—è —Ñ–∏–ª—å–º–∞".
–ù—É‚Ä¶ —Ç–∏–ø–∞ –¥–∞.

–Ø —Ö–æ—á—É —á—Ç–æ–±—ã —ç—Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª–æ—Å—å.
–°—ä—ë–º–∫–∏, –æ–Ω–∞, —ç—Ç–æ—Ç —à—É–º, –∫–æ—Ñ–µ –≤ —Å—Ç–∞–∫–∞–Ω–∞—Ö.
–ö–∞–∫ –±—É–¥—Ç–æ –∂–∏–∑–Ω—å –Ω–∞–∫–æ–Ω–µ—Ü —Å—Ç–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π.

–ó–∞–ø–∏—Å—å 3
20 —è–Ω–≤–∞—Ä—è
–ü–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –ö—Ä–∏—Å—Ç–∏–Ω–æ–π.

–û–Ω–∞ –ø—Ä–∏—à–ª–∞ —Å –õ–µ–Ω–æ–π. –ü—Ä–æ—Å—Ç–æ —Å–∏–¥–µ–ª–∞ —Ä—è–¥–æ–º –≤ –≥—Ä–∏–º—ë—Ä–∫–µ.
–°–º–æ—Ç—Ä–µ–ª–∞ —Ç–∞–∫, –±—É–¥—Ç–æ –∑–Ω–∞–µ—Ç –æ–±–æ –º–Ω–µ –≤—Å—ë.

–û–Ω–∞ —Å–∫–∞–∑–∞–ª–∞:
"—Ç—ã —É—Å—Ç–∞–ª –ø—Ä–∏—Ç–≤–æ—Ä—è—Ç—å—Å—è".

–Ø –Ω–µ –ø–æ–Ω—è–ª, —á—Ç–æ –æ–Ω–∞ –∏–º–µ–ª–∞ –≤ –≤–∏–¥—É.
–Ø –Ω–µ –ø—Ä–∏—Ç–≤–æ—Ä—è—é—Å—å.

–ü–æ—Ç–æ–º –æ–Ω–∞ —É–ª—ã–±–Ω—É–ª–∞—Å—å –∏ —É—à–ª–∞.

–°—Ç—Ä–∞–Ω–Ω–æ.

–ó–∞–ø–∏—Å—å 4
24 —è–Ω–≤–∞—Ä—è
–Ø –ø–æ–π–º–∞–ª —Å–µ–±—è –Ω–∞ —Ç–æ–º, —á—Ç–æ –∏—â—É –≥–ª–∞–∑–∞–º–∏ –ö—Ä–∏—Å—Ç–∏–Ω—É.
–ó–∞—á–µ–º?

–≠—Ç–æ –≤–æ–æ–±—â–µ –Ω–µ —Ç–æ.

–ê–Ω—è ‚Äî —ç—Ç–æ –ê–Ω—è.
–ú—ã —Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–∏.
–Ø –ª—é–±–ª—é –µ—ë. –Ø –ø—Ä–∞–≤–¥–∞ –ª—é–±–ª—é.

–ù–æ –ø–æ—á–µ–º—É –º–Ω–µ —Ç–∞–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å –ö—Ä–∏—Å—Ç–∏–Ω–æ–π?
–û–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç –∫–∞–∫ –±—É–¥—Ç–æ —á–∏—Ç–∞–µ—Ç –º–µ–Ω—è.

–°–µ–≥–æ–¥–Ω—è –æ–Ω–∞ —Å–ø—Ä–æ—Å–∏–ª–∞:
"—Ç—ã —Å—á–∞—Å—Ç–ª–∏–≤?"

–Ø —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å –¥–∞.
–ù–æ –Ω–µ —Å–º–æ–≥ —Å—Ä–∞–∑—É –æ—Ç–≤–µ—Ç–∏—Ç—å.

–ó–∞–ø–∏—Å—å 5
28 —è–Ω–≤–∞—Ä—è
–Ø —Å—Ç–∞–ª —É—Ö–æ–¥–∏—Ç—å —Ä–∞–Ω—å—à–µ.

–Ø –Ω–µ –∑–Ω–∞—é –ø–æ—á–µ–º—É.
–ö–æ–≥–¥–∞ –ê–Ω—è —Ä—è–¥–æ–º, –º–Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—è–∂–µ–ª–æ.

–û–Ω–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –º–µ–Ω—è –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –∞ —è‚Ä¶
—è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –≥—Ä—è–∑–Ω—ã–º.

–ö—Ä–∏—Å—Ç–∏–Ω–∞ –Ω–∞–ø–∏—Å–∞–ª–∞ –≤–µ—á–µ—Ä–æ–º:
"–∫–∞–∫ —Ç—ã?"

–ò —è –æ—Ç–≤–µ—Ç–∏–ª.
–ò –º—ã –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –¥–æ–ª–≥–æ.

–Ø –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã–ª.

–ù–æ —è –Ω–µ –º–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

–ó–∞–ø–∏—Å—å 6
1 —Ñ–µ–≤—Ä–∞–ª—è
–Ø —Å–æ–≤—Ä–∞–ª –ê–Ω–µ —á—Ç–æ "–∏–≥—Ä–∞—é –≤ –¥–æ—Ç—É —Å –ø–∞—Ä–Ω—è–º–∏".
–•–æ—Ç—è –º—ã –¥–∞–∂–µ –Ω–µ —Å–æ–±–∏—Ä–∞–ª–∏—Å—å.

–Ø –±—ã–ª —Å –ö—Ä–∏—Å—Ç–∏–Ω–æ–π.

–ú—ã –ø—Ä–æ—Å—Ç–æ –≥—É–ª—è–ª–∏, –ø–æ—Ç–æ–º —Å–∏–¥–µ–ª–∏ –≤ –∫–æ—Ñ–µ–π–Ω–µ,
–æ–Ω–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∞ –ø—Ä–æ –∫–∞–∫–∏–µ-—Ç–æ —ç–Ω–µ—Ä–≥–∏–∏ –∏ "–ø—Ä–∏–≤—è–∑–∫–∏".

–Ø —Å–º–µ—è–ª—Å—è, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –±—ã–ª–æ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ.
–ö–∞–∫ –±—É–¥—Ç–æ —è –Ω–µ –º–æ–≥—É —É–π—Ç–∏.

–û–Ω–∞ —Å–∫–∞–∑–∞–ª–∞:
"—Ç—ã —Ö–æ—á–µ—à—å –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–º".

–ê —è‚Ä¶ —è –Ω–µ –∑–Ω–∞—é —á–µ–≥–æ —Ö–æ—á—É.

–ó–∞–ø–∏—Å—å 7
4 —Ñ–µ–≤—Ä–∞–ª—è
–ê–Ω—è —Å–µ–≥–æ–¥–Ω—è —Å–ø—Ä–æ—Å–∏–ª–∞:
"—Ç—ã –º–µ–Ω—è –ª—é–±–∏—à—å?"

–ò —è —Å–∫–∞–∑–∞–ª "–¥–∞".

–ù–æ —ç—Ç–æ –ø—Ä–æ–∑–≤—É—á–∞–ª–æ —Ç–∞–∫, –±—É–¥—Ç–æ —è –æ—Ç–≤–µ—á–∞—é –Ω–∞ –≤–æ–ø—Ä–æ—Å –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ.
–°—É—Ö–æ.

–û–Ω–∞ —É—à–ª–∞, –∏ —É –º–µ–Ω—è –≤–Ω—É—Ç—Ä–∏ –≤—Å—ë —Å–∂–∞–ª–æ—Å—å.

–ü–æ—á–µ–º—É —è –Ω–µ –º–æ–≥—É –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—è—Ç—å –µ—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ??
–ü–æ—á–µ–º—É –º–Ω–µ –ø—Ä–æ—â–µ –Ω–∞–ø–∏—Å–∞—Ç—å "–ø—Ä–æ—Å—Ç–∏" –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, —á–µ–º —Å–∫–∞–∑–∞—Ç—å —ç—Ç–æ –≤–∂–∏–≤—É—é?

–ó–∞–ø–∏—Å—å 8
6 —Ñ–µ–≤—Ä–∞–ª—è
–ö—Ä–∏—Å—Ç–∏–Ω–∞ —Å–∫–∞–∑–∞–ª–∞, —á—Ç–æ –ê–Ω—è "—Ç—è–Ω–µ—Ç –º–µ–Ω—è –≤–Ω–∏–∑".

–Ø —Ä–∞–∑–æ–∑–ª–∏–ª—Å—è.
–°–∫–∞–∑–∞–ª: "–Ω–µ –≥–æ–≤–æ—Ä–∏ —Ç–∞–∫".

–ê –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —É–ª—ã–±–Ω—É–ª–∞—Å—å –∏ —Å–∫–∞–∑–∞–ª–∞:
"—Ç—ã —Å–∞–º —ç—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å".

–ò –≤–æ—Ç —è —Å–∏–∂—É –∏ –¥—É–º–∞—é‚Ä¶
–º–æ–∂–µ—Ç –æ–Ω–∞ –ø—Ä–∞–≤–∞?

–Ø –Ω–µ–Ω–∞–≤–∏–∂—É —Å–µ–±—è –∑–∞ —ç—Ç–∏ –º—ã—Å–ª–∏.

–ó–∞–ø–∏—Å—å 9
8 —Ñ–µ–≤—Ä–∞–ª—è
–ö—Ä–∏—Å—Ç–∏–Ω–∞ –¥–∞–ª–∞ –º–Ω–µ –∏–≥–æ–ª–∫—É.

–°–∫–∞–∑–∞–ª–∞:
"–ø–æ–ª–æ–∂–∏ –µ–π —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–æ—Å–∏–ª–∞ —ç—Ç–æ —Ä—è–¥–æ–º —Å —Å–æ–±–æ–π".

–Ø —Å–ø—Ä–æ—Å–∏–ª –∑–∞—á–µ–º.
–û–Ω–∞ —Å–∫–∞–∑–∞–ª–∞:
"—á—Ç–æ–±—ã –æ–Ω–∞ –æ—Ç–ø—É—Å—Ç–∏–ª–∞ —Ç–µ–±—è".

–Ø –¥–æ–ª–∂–µ–Ω –±—ã–ª –ø–æ—Å–ª–∞—Ç—å –µ—ë.

–ù–æ –ø–æ—á–µ–º—É-—Ç–æ –Ω–µ –ø–æ—Å–ª–∞–ª.

–Ø –ø–æ–ª–æ–∂–∏–ª –∏–≥–æ–ª–∫—É –≤ –∫–∞—Ä–º–∞–Ω –ê–Ω–∏–Ω–æ–π –∫—É—Ä—Ç–∫–∏.

–Ø —Ä–µ–∞–ª—å–Ω–æ —ç—Ç–æ —Å–¥–µ–ª–∞–ª.

–ß—Ç–æ —è –¥–µ–ª–∞—é.

–ó–∞–ø–∏—Å—å 10
9 —Ñ–µ–≤—Ä–∞–ª—è
–ê–Ω—è —Å–∫–∞–∑–∞–ª–∞ —á—Ç–æ —É –Ω–µ—ë –≤—Å—ë –≤–∞–ª–∏—Ç—Å—è –∏–∑ —Ä—É–∫.
–û–Ω–∞ —É—Å—Ç–∞–ª–∞, –ø–ª–∞—á–µ—Ç, —Ç–µ—Ä—è–µ—Ç –≤–µ—â–∏, –ø–∞–¥–∞–µ—Ç.

–Ø —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å –µ–π –ø—Ä–∞–≤–¥—É.
–ù–æ –Ω–µ —Å–º–æ–≥.

–Ø –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–ª "–∫–æ—à–º–∞—Ä".

–ì–æ—Å–ø–æ–¥–∏, –∫–∞–∫–æ–π –∂–µ —è‚Ä¶

–ó–∞–ø–∏—Å—å 11
11 —Ñ–µ–≤—Ä–∞–ª—è
–û–Ω–∞ –ø—Ä–∏–µ—Ö–∞–ª–∞ –∫–æ –º–Ω–µ.

–Ø –Ω–µ –æ–∂–∏–¥–∞–ª.

–Ø —É—Å–ª—ã—à–∞–ª –∑–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å –∏ —É –º–µ–Ω—è –∫–∞–∫ –±—É–¥—Ç–æ —Å–µ—Ä–¥—Ü–µ –ø—Ä–æ–≤–∞–ª–∏–ª–æ—Å—å.
–ö—Ä–∏—Å—Ç–∏–Ω–∞ –±—ã–ª–∞ —Ä—è–¥–æ–º.

–Ø —Å–∫–∞–∑–∞–ª –µ–π: "—É–π–¥–∏".
–û–Ω–∞ –Ω–µ —É—à–ª–∞.

–ê–Ω—è –≤–æ—à–ª–∞.
–ò —è —É–≤–∏–¥–µ–ª –µ—ë –ª–∏—Ü–æ.

–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–±—É–¥—É —ç—Ç–æ –ª–∏—Ü–æ.

–Ø –ø—ã—Ç–∞–ª—Å—è —Å–∫–∞–∑–∞—Ç—å "–ø–æ–¥–æ–∂–¥–∏",
–Ω–æ –≤ –≥–æ–ª–æ–≤–µ –±—ã–ª–æ –ø—É—Å—Ç–æ.

–ê –ø–æ—Ç–æ–º –æ–Ω–∞ —É–≤–∏–¥–µ–ª–∞ –ö—Ä–∏—Å—Ç–∏–Ω—É.

–ò –≤—Å—ë.

–Ø –∫–∞–∫ –±—É–¥—Ç–æ –æ—á–Ω—É–ª—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ê–Ω—è —Ö–ª–æ–ø–Ω—É–ª–∞ –¥–≤–µ—Ä—å—é.

–ò–ª—å—è –∑–≤–æ–Ω–∏–ª –º–Ω–µ —Ä–∞–∑ –¥–µ—Å—è—Ç—å.
–Ø –Ω–µ –≤–∑—è–ª —Ç—Ä—É–±–∫—É.

–§–∏–ª—å–º –Ω–µ –≤—ã–π–¥–µ—Ç.

–ò —ç—Ç–æ –º–æ—è –≤–∏–Ω–∞.

–ó–∞–ø–∏—Å—å 12
–ø–æ—Å–ª–µ
–Ø –Ω–∞—à—ë–ª –≥–∏—Ç–∞—Ä—É.
–¢—É, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ –º–Ω–µ –ø–æ–¥–∞—Ä–∏–ª–∞.

–û–Ω–∞ —Å—Ç–æ–∏—Ç —É —Å—Ç–µ–Ω—ã.
–ò —è –ø–æ–Ω—è–ª, —á—Ç–æ —è –≤—Å—ë —Ä–∞–∑—Ä—É—à–∏–ª.

–ò —Å–∞–º–æ–µ —Å—Ç—Ä–∞—à–Ω–æ–µ ‚Äî
—è –Ω–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —Å–º–æ–≥—É —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å."""

# –†–æ–ª—å B ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –ê–Ω–Ω—ã
DIARY_ANNA = """–ó–∞–ø–∏—Å—å 1
9 —è–Ω–≤–∞—Ä—è
–Ø –Ω–µ –≤–µ—Ä—é —á—Ç–æ —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ.

–ú—ã —Å–Ω–∏–º–∞–µ–º —Ñ–∏–ª—å–º.

–ú—ã. –°–Ω–∏–º–∞–µ–º. –§–∏–ª—å–º.

–ò–ª—å—è —Å–µ–≥–æ–¥–Ω—è —Å–∫–∞–∑–∞–ª "–º—ã –¥–µ–ª–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é"
–∏ —è —á—É—Ç—å –Ω–µ —Ä–∞—Å–ø–ª–∞–∫–∞–ª–∞—Å—å.

–ú–∞—Ä–∫ –±—ã–ª —Ä—è–¥–æ–º.
–û–Ω –¥–µ—Ä–∂–∞–ª –º–µ–Ω—è –∑–∞ —Ä—É–∫—É –ø–æ–∫–∞ –≤—ã—Å—Ç–∞–≤–ª—è–ª–∏ —Å–≤–µ—Ç.
–ò –º–Ω–µ –±—ã–ª–æ —Å–ø–æ–∫–æ–π–Ω–æ.

–Ø —Ç–∞–∫ –ª—é–±–ª—é –µ–≥–æ.

–ó–∞–ø–∏—Å—å 2
14 —è–Ω–≤–∞—Ä—è
–°–µ–≥–æ–¥–Ω—è –±—ã–ª–∞ —Å—Ü–µ–Ω–∞ –≥–¥–µ –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –º–µ–Ω—è –∏ —É–ª—ã–±–∞–µ—Ç—Å—è.

–Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –æ–Ω —ç—Ç–æ –¥–µ–ª–∞–µ—Ç, –Ω–æ —è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–±—ã–≤–∞—é —á—Ç–æ –≤–æ–∫—Ä—É–≥ –ª—é–¥–∏.
–ë—É–¥—Ç–æ –º—ã –ø—Ä–∞–≤–¥–∞ –æ–¥–Ω–∏.

–õ–µ–Ω–∞ —Å–∫–∞–∑–∞–ª–∞ —á—Ç–æ –º—ã "–∫–∞–∫ –∏–∑ –∫–∏–Ω–æ".
–°–º–µ—à–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –∏ –µ—Å—Ç—å –∫–∏–Ω–æ.

–ê –≤–µ—á–µ—Ä–æ–º –ú–∞—Ä–∫ –∏–≥—Ä–∞–ª –Ω–∞ –≥–∏—Ç–∞—Ä–µ.
–ü–ª–æ—Ö–æ, –Ω–æ —Å—Ç–∞—Ä–∞–ª—Å—è.

–Ø —Å–ª—É—à–∞–ª–∞ –∏ –¥—É–º–∞–ª–∞ —á—Ç–æ —ç—Ç–æ —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —á—Ç–æ —è —Å–ª—ã—à–∞–ª–∞.

–ó–∞–ø–∏—Å—å 3
18 —è–Ω–≤–∞—Ä—è
–ú—ã –ø–æ—á—Ç–∏ —Å–Ω—è–ª–∏ –≤—Å—ë.

–û—Å—Ç–∞–ª–∞—Å—å —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ.
–§–ò–ù–ê–õ–¨–ù–ê–Ø.

–Ø –º–µ—á—Ç–∞—é –æ –Ω–µ–π.
–Ø —Ö–æ—á—É, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –∏–¥–µ–∞–ª—å–Ω–æ–π.

–ú–∞—Ä–∫ —Å–∫–∞–∑–∞–ª —á—Ç–æ –ø–æ—Å–ª–µ —Å—ä—ë–º–æ–∫ –º—ã –ø–æ–π–¥—ë–º –∫—É–¥–∞-–Ω–∏–±—É–¥—å –≤–¥–≤–æ—ë–º.
–Ø —Ç–∞–∫ —Ä–∞–¥–∞, —á—Ç–æ –∞–∂ —Å—Ç—Ä–∞—à–Ω–æ.

–ó–∞–ø–∏—Å—å 4
23 —è–Ω–≤–∞—Ä—è
–°–µ–≥–æ–¥–Ω—è –ú–∞—Ä–∫ —É—à—ë–ª —Ä–∞–Ω—å—à–µ.

–°–∫–∞–∑–∞–ª —á—Ç–æ "–¥–µ–ª–∞".

–Ø —Å–ø—Ä–æ—Å–∏–ª–∞ –∫–∞–∫–∏–µ.
–û–Ω —Å–∫–∞–∑–∞–ª "–ø–æ—Ç–æ–º —Ä–∞—Å—Å–∫–∞–∂—É".

–ù–æ –æ–Ω –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª.

–ò –Ω–æ—á—å—é –æ–Ω –Ω–µ –Ω–∞–ø–∏—Å–∞–ª —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.

–≠—Ç–æ –º–µ–ª–æ—á—å.
–Ø –∑–Ω–∞—é —á—Ç–æ —ç—Ç–æ –º–µ–ª–æ—á—å.

–ù–æ –ø–æ—á–µ–º—É –º–Ω–µ —Ç–∞–∫ –±–æ–ª—å–Ω–æ?

–ó–∞–ø–∏—Å—å 5
27 —è–Ω–≤–∞—Ä—è
–Ø —Å–µ–≥–æ–¥–Ω—è –ø–æ—Ç–µ—Ä—è–ª–∞ –∫–ª—é—á–∏.
–¢—Ä–µ—Ç–∏–π —Ä–∞–∑ –∑–∞ –Ω–µ–¥–µ–ª—é.

–Ø —Å—Ç–æ—è–ª–∞ —É –¥–≤–µ—Ä–∏ –∏ —Å–º–µ—è–ª–∞—Å—å –∫–∞–∫ –ø—Å–∏—Ö.
–ü–æ—Ç–æ–º —á—É—Ç—å –Ω–µ –∑–∞–ø–ª–∞–∫–∞–ª–∞.

–ú–∞—Ä–∫ –Ω–µ –ø—Ä–∏–µ—Ö–∞–ª.

–û–Ω —Å–∫–∞–∑–∞–ª —á—Ç–æ –∑–∞–Ω—è—Ç.

–û–Ω –≤—Å–µ–≥–¥–∞ –∑–∞–Ω—è—Ç.

–ó–∞–ø–∏—Å—å 6
1 —Ñ–µ–≤—Ä–∞–ª—è
–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —Å–æ –º–Ω–æ–π —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫.

–Ø —É–ø–∞–ª–∞ –ø–æ –ø—É—Ç–∏ –¥–æ–º–æ–π.
–ü—Ä–æ—Å—Ç–æ. –ù–∞ —Ä–æ–≤–Ω–æ–º –º–µ—Å—Ç–µ.

–ü–æ—Ç–æ–º –º–µ–Ω—è —á—É—Ç—å –Ω–µ —Å–±–∏–ª–∞ –º–∞—à–∏–Ω–∞.

–ü–æ—Ç–æ–º —è –ø—Ä–æ–ª–∏–ª–∞ –∫–æ—Ñ–µ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π.
–ö–æ–Ω–µ—á–Ω–æ –∂–µ.

–ê –µ—â—ë —è –≤—Å—ë –≤—Ä–µ–º—è —á—É–≤—Å—Ç–≤—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å.
–ö–∞–∫ –±—É–¥—Ç–æ —è –Ω–µ —Å–ø–∞–ª–∞ –Ω–µ–¥–µ–ª—é.

–ò —Å–∞–º–æ–µ —Å—Ç—Ä–∞—à–Ω–æ–µ‚Ä¶

–ú–∞—Ä–∫ —Ä—è–¥–æ–º, –Ω–æ –±—É–¥—Ç–æ –Ω–µ —Å–æ –º–Ω–æ–π.

–û–Ω —Å–º–æ—Ç—Ä–∏—Ç –≤ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —É–ª—ã–±–∞–µ—Ç—Å—è.
–Ø —Å–∏–∂—É —Ä—è–¥–æ–º –∏ —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –º–µ–±–µ–ª—å—é.

–ó–∞–ø–∏—Å—å 7
3 —Ñ–µ–≤—Ä–∞–ª—è
–Ø —Å–ø—Ä–æ—Å–∏–ª–∞ –µ–≥–æ:
"—Ç—ã –º–µ–Ω—è –ª—é–±–∏—à—å?"

–û–Ω —Å–∫–∞–∑–∞–ª "–¥–∞".

–ù–æ —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —ç—Ç–æ –Ω–∞–¥–æ —Å–∫–∞–∑–∞—Ç—å.
–ù–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ.

–Ø –Ω–µ –∑–Ω–∞—é, –º–æ–∂–µ—Ç —è –Ω–∞–∫—Ä—É—á–∏–≤–∞—é.

–ù–æ —è —á—É–≤—Å—Ç–≤—É—é —á—Ç–æ –æ–Ω —É—Ö–æ–¥–∏—Ç.

–ò –º–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ.

–ó–∞–ø–∏—Å—å 8
5 —Ñ–µ–≤—Ä–∞–ª—è
–°–µ–≥–æ–¥–Ω—è –Ω–∞ –ø–ª–æ—â–∞–¥–∫–µ —è –≤–∏–¥–µ–ª–∞ –ö—Ä–∏—Å—Ç–∏–Ω—É.

–û–Ω–∞ –ø–æ–¥—Ä—É–≥–∞ –õ–µ–Ω—ã.
–û–Ω–∞ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º.
–ò –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º —Å –ú–∞—Ä–∫–æ–º —Ç–æ–∂–µ.

–û–Ω–∏ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª–∏.
–ü—Ä–æ—Å—Ç–æ —Å—Ç–æ—è–ª–∏ –∏ –≥–æ–≤–æ—Ä–∏–ª–∏, –∞ –ø–æ—Ç–æ–º –æ–Ω–∞ —É–ª—ã–±–Ω—É–ª–∞—Å—å.

–ò —è –ø–æ–π–º–∞–ª–∞ —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏:
–∞ –≤–¥—Ä—É–≥‚Ä¶

–ù–µ—Ç.
–ù–µ—Ç –Ω–µ—Ç –Ω–µ—Ç.

–Ø –Ω–µ —Ö–æ—á—É –±—ã—Ç—å —Ç–∞–∫–æ–π –¥–µ–≤—É—à–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç.

–ù–æ –ø–æ—á–µ–º—É —Ç–æ–≥–¥–∞ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø–ª–∞–∫–∞—Ç—å?

–ó–∞–ø–∏—Å—å 9
7 —Ñ–µ–≤—Ä–∞–ª—è
–Ø —É—Å—Ç–∞–ª–∞.

–Ø –Ω–∞–ø–∏—Å–∞–ª–∞ –µ–º—É —á—Ç–æ –º–Ω–µ –ø–ª–æ—Ö–æ, —á—Ç–æ —è –Ω–µ –≤—ã–≤–æ–∂—É, —á—Ç–æ —è —Å–∫—É—á–∞—é.

–û–Ω –æ—Ç–≤–µ—Ç–∏–ª —á—Ç–æ —É –Ω–µ–≥–æ "–¥–æ—Ç–∞".

–î–æ—Ç–∞.

–Ø –Ω–µ–Ω–∞–≤–∏–∂—É —ç—Ç–æ —Å–ª–æ–≤–æ —Ç–µ–ø–µ—Ä—å.

–Ø –ø—ã—Ç–∞–ª–∞—Å—å —É–ª—ã–±–Ω—É—Ç—å—Å—è, –Ω–æ —É –º–µ–Ω—è —Ç—Ä—è—Å–ª–∏—Å—å —Ä—É–∫–∏.

–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–Ω—É–∂–Ω–æ–π.

–ó–∞–ø–∏—Å—å 10
9 —Ñ–µ–≤—Ä–∞–ª—è
–°–µ–≥–æ–¥–Ω—è —è –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª–∞ –∏ —Å–∫–∞–∑–∞–ª–∞ –µ–º—É —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å.

–û–Ω —Å–∫–∞–∑–∞–ª "–Ω–µ –º–æ–≥—É".

–Ø —Å–ø—Ä–æ—Å–∏–ª–∞ –ø–æ—á–µ–º—É.
–û–Ω —Å–∫–∞–∑–∞–ª "—Ç—É—Ä–Ω–∏—Ä".

–û–ø—è—Ç—å.

–ò–ª—å—è –∑–ª–∏—Ç—Å—è.
–ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–ª–∞.
–ú—ã –Ω–µ –º–æ–∂–µ–º —Å–Ω—è—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ü–µ–Ω—É –ø–æ—Ç–æ–º—É —á—Ç–æ –ú–∞—Ä–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏—Å—á–µ–∑–∞–µ—Ç.

–ò —è —á—É–≤—Å—Ç–≤—É—é —á—Ç–æ —ç—Ç–æ –≤—Å—ë –∏–∑-–∑–∞ –º–µ–Ω—è.
–•–æ—Ç—è —è –Ω–µ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —è —Å–¥–µ–ª–∞–ª–∞.

–ó–∞–ø–∏—Å—å 11
11 —Ñ–µ–≤—Ä–∞–ª—è
–Ø –∂–¥–∞–ª–∞ –µ–≥–æ –Ω–∞ —É–ª–∏—Ü–µ.

20 –º–∏–Ω—É—Ç.
–ü–æ—Ç–æ–º 30.

–Ø –∑–∞–º—ë—Ä–∑–ª–∞ —Ç–∞–∫, —á—Ç–æ –Ω–µ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –ø–∞–ª—å—Ü–µ–≤.

–Ø –ø–∏—Å–∞–ª–∞ –µ–º—É.
–û–Ω –Ω–µ –æ—Ç–≤–µ—á–∞–ª.

–ê –ø–æ—Ç–æ–º –Ω–∞–ø–∏—Å–∞–ª:
"–ø—Ä–æ—Å—Ç–∏, –Ω–µ –º–æ–≥—É".

–ò –≤—Å—ë.

–Ø —Å–∏–¥–µ–ª–∞ –Ω–∞ –ª–∞–≤–æ—á–∫–µ –∏ —É –º–µ–Ω—è –±—ã–ª–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —è –ø—Ä–æ—Å—Ç–æ –∏—Å—á–µ–∑–∞—é.

–≠—Ç–æ –±—ã–ª–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–∞–ø–ª—è.

–Ø –ø–æ–µ—Ö–∞–ª–∞ –∫ –Ω–µ–º—É.

–ó–∞–ø–∏—Å—å 12
11 —Ñ–µ–≤—Ä–∞–ª—è (–ø–æ–∑–∂–µ)
–Ø —É–≤–∏–¥–µ–ª–∞ –µ—ë.

–Ø –Ω–µ —Ö–æ—á—É –ø–∏—Å–∞—Ç—å –µ—ë –∏–º—è.
–ù–µ —Ö–æ—á—É.

–û–Ω–∞ –±—ã–ª–∞ —É –Ω–µ–≥–æ –¥–æ–º–∞.

–ò –æ–Ω –¥–∞–∂–µ –Ω–µ –≤—ã–≥–ª—è–¥–µ–ª —É–¥–∏–≤–ª—ë–Ω–Ω—ã–º.

–ö–∞–∫ –±—É–¥—Ç–æ —è –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ —ç—Ç–æ —É–≤–∏–¥–µ—Ç—å.

–Ø –∫—Ä–∏—á–∞–ª–∞.
–Ø –ø–ª–∞–∫–∞–ª–∞.
–Ø –Ω–µ –ø–æ–º–Ω—é –ø–æ–ª–æ–≤–∏–Ω—É —Å–ª–æ–≤.

–ù–æ —è –ø–æ–º–Ω—é –¥—Ä—É–≥–æ–µ.

–ù–∞ —Å—Ç–æ–ª–µ –±—ã–ª–∏ —Å–≤–µ—á–∏.
–ö–∞–∫–∏–µ-—Ç–æ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã.
–ö–æ–ª–±—ã. –ò–≥–ª—ã.

–ò –º–Ω–µ —Å—Ç–∞–ª–æ –∂—É—Ç–∫–æ.

–ü–æ—Ç–æ–º—É —á—Ç–æ —è –≤–¥—Ä—É–≥ –≤—Å–ø–æ–º–Ω–∏–ª–∞ –≤—Å–µ —Å–≤–æ–∏ –Ω–µ—É–¥–∞—á–∏.

–ü–∞–¥–µ–Ω–∏—è. –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –∫–ª—é—á–∏. –°–ª–æ–º–∞–Ω–Ω—ã–π –ø—Ä–∏–Ω—Ç–µ—Ä. –ú–∞—à–∏–Ω—É.

–ò —è –ø–æ–¥—É–º–∞–ª–∞‚Ä¶

–º–µ–Ω—è –ø—Ä–∞–≤–¥–∞ –∑–∞–≥–æ–≤–æ—Ä–∏–ª–∏.

–ó–∞–ø–∏—Å—å 13
–ø–æ—Å–ª–µ
–Ø –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ.

–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —è –±–æ–ª—å—à–µ –Ω–∏–∫–æ–º—É –Ω–µ –ø–æ–≤–µ—Ä—é.

–ù–æ —Å–∞–º–æ–µ –±–æ–ª—å–Ω–æ–µ ‚Äî
—è –≤—Å—ë —Ä–∞–≤–Ω–æ –ª—é–±–ª—é –µ–≥–æ.

–ò —è –Ω–µ–Ω–∞–≤–∏–∂—É —Å–µ–±—è –∑–∞ —ç—Ç–æ."""

# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–∞—Ç –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø–∏—Å–µ–π
_DATE_PATTERN = re.compile(
    r"^(–ó–∞–ø–∏—Å—å \d+|"
    r"\d{1,2}\s+(—è–Ω–≤–∞—Ä—è|—Ñ–µ–≤—Ä–∞–ª—è|–º–∞—Ä—Ç–∞|–∞–ø—Ä–µ–ª—è|–º–∞—è|–∏—é–Ω—è|–∏—é–ª—è|–∞–≤–≥—É—Å—Ç–∞|—Å–µ–Ω—Ç—è–±—Ä—è|–æ–∫—Ç—è–±—Ä—è|–Ω–æ—è–±—Ä—è|–¥–µ–∫–∞–±—Ä—è)"
    r"(?:\s+\([^)]+\))?|"
    r"–ø–æ—Å–ª–µ)$",
    re.MULTILINE,
)


def format_diary_html(raw: str) -> str:
    """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç –¥–Ω–µ–≤–Ω–∏–∫–∞ –≤ HTML —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏."""
    lines = raw.split("\n")
    result = []
    for line in lines:
        escaped = html.escape(line)
        if _DATE_PATTERN.match(line.strip()):
            result.append(f"<strong>{escaped}</strong>")
        else:
            result.append(escaped)
    return "<br>\n".join(result)


def get_diary_for_role(role: str) -> tuple[str, str]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (subtitle, html_content) –¥–ª—è —Ä–æ–ª–∏. role: 'A' –∏–ª–∏ 'B'."""
    r = (role or "A").upper().replace("ROLE_", "")
    if r == "B":
        return "–ó–∞–ø–∏—Å–∏ –ê–Ω–Ω—ã", format_diary_html(DIARY_ANNA)
    return "–ó–∞–ø–∏—Å–∏ –ú–∞—Ä–∫–∞", format_diary_html(DIARY_MARK)


_ENTRY_START = re.compile(r"^(–ó–∞–ø–∏—Å—å \d+)\s*$", re.MULTILINE)


def _split_into_entries(raw: str) -> list[dict]:
    """–†–∞–∑–±–∏–≤–∞–µ—Ç —Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç –Ω–∞ –∑–∞–ø–∏—Å–∏. –ö–∞–∂–¥–∞—è: title, date, body."""
    entries = []
    parts = _ENTRY_START.split(raw.strip())
    # parts[0] –ø—É—Å—Ç–æ–π, –∑–∞—Ç–µ–º —á–µ—Ä–µ–¥—É—é—Ç—Å—è: title, content
    i = 1
    while i < len(parts):
        title = parts[i].strip()  # "–ó–∞–ø–∏—Å—å 1"
        i += 1
        content = parts[i].strip() if i < len(parts) else ""
        i += 1
        lines = content.split("\n")
        date = ""
        body_lines = lines
        if lines and _DATE_PATTERN.match(lines[0].strip()):
            date = lines[0].strip()
            body_lines = lines[1:]
        entries.append({
            "title": title,
            "date": date,
            "body": "\n".join(body_lines),
        })
    return entries


def get_diary_entries_for_role(role: str) -> tuple[str, list[dict]]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (subtitle, entries). –ö–∞–∂–¥–∞—è entry: title, date, body_html."""
    r = (role or "A").upper().replace("ROLE_", "")
    raw = DIARY_ANNA if r == "B" else DIARY_MARK
    subtitle = "–ó–∞–ø–∏—Å–∏ –ê–Ω–Ω—ã" if r == "B" else "–ó–∞–ø–∏—Å–∏ –ú–∞—Ä–∫–∞"
    entries = _split_into_entries(raw)
    result = []
    for e in entries:
        full = f"{e['title']}\n{e['date']}\n{e['body']}" if e["date"] else f"{e['title']}\n{e['body']}"
        result.append({
            "title": html.escape(e["title"]),
            "date": html.escape(e["date"]),
            "body_html": format_diary_html(full),
        })
    return subtitle, result
